//~--~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-
//  manhttp 
//
//  An HTTP server that provides a web-based, hypertext-driven
//  frontend for man(1), info(1), and apropos(1).  MANHTTP lets you
//  browse and search your system's online documentation using a web
//  browser.
//
//~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~
//
//  To compile:  
//  sassc -t compact style.scss style.css
//
//~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~
//
//  Copyright 2019 Jonathan Stewart
//  
//  Licensed under the Apache License, Version 2.0 (the "License")
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//  
//      http://www.apache.org/licenses/LICENSE-2.0
//  
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~



//  Font definitions.

$MonoFont           : Cousine, Hack, "Ubuntu Mono", "DejaVu Sans Mono",
                      Monaco, "Lucida Console", monospace;

$ProportionalFont   : "Amazon Ember", "Clear Sans", 
                      Roboto, Lato, "Source Sans Pro", Verdana,
                      sans-serif;

$ControlFont        : $ProportionalFont;

$TitleFont          : $ProportionalFont;

$TitleNumberFont    : $TitleFont;

$MainFontSize       : 16px;



//  ("@font-face" definitions would go here if they are needed.)



//  Color definitions.

$NavbarHeight            : 40px;
$NavbarFontSize          : 14px;

$MainBackground          : #fff2df;
$SecondaryBackground     : #ffe0b3;
$MainTextColor           : #454545;
$MainLinkColor           : #006500;
$InfoLinkColor           : #031f84;
$AccentColor1            : #a2836e;
$AccentColor2            : #c3c3c3;
$TitleColor              : #667292;
$TitleBarBackground      : $TitleColor;
$TitleBarTextColor1      : #ffffff;
$TitleBarTextColor2      : #e0e0e0;

$NavbarBackground        : #404040;
$NavbarTextColor         : #ffffff;
$NavbarLabelColor        : #909090;
$NavbarLinkColor         : #ffff00;
$NavbarBorderColor       : #000000;
$NavbarLineColor         : #909090;



//   -----  General formatting  -----


body
{
  background:          $MainBackground;
  color:               $MainTextColor;
}

pre
{
  font-family:         $MonoFont;
  font-size:           $MainFontSize;
}

span[Bold]
{
  font-weight:        bold;
}

span[Ital]
{
  font-style:         italic;
}

a[RefType="uri"], a[RefType="uri"]:visited
{
  color:             $MainLinkColor;
  text-decoration:   none;
}

a[RefType="uri"]:hover
{
  text-decoration:   1px underline solid;
}



//   -----  Controls  -----

button
{
  background:          #006500;
  border:              1px solid #006500;
  border-radius:       5px;
  color:               #ffffff;
  font-family:         $ControlFont;
  font-size:           15px;
  padding-top:         2px;
  padding-bottom:      2px; 

  &:hover
  {
  	filter:            brightness(120%);
  }

  &:disabled:hover
  {
  	filter:            none;
  }

  &:disabled 
  {
    background:        #c0c0c0;
    color:             #656565;
    border:            1px solid #808080;
  }

  &[Active]::before
  {
    content:           "[\00a0";  
  }

  &[Active]::after  
  {
    content:           "\00a0]";  
  }
}


.HideButton
{
  background:           inherit;
  border:               none;
  font-family:          $ControlFont;
  font-size:            12px;
  color:                $TitleBarTextColor2;
  float:                right;
  line-height:          30px;
  padding-top:          0px;
  padding-bottom:       0px;
  border-radius:        0px;
  margin-left:          40px;
  margin-right:         0px;

  &:hover
  {
    text-decoration:    underline solid;
    filter:             none;  
  }

  &[State="SHOWN"]::after  
  {
    content:            "[Hide\00a0\25b2]";
  }

  &[State="HIDDEN"]::after  
  {
    content:            "[Show\00a0\25bc]";
  }  
}



//  -----  Page-top navigation bar  -----


#NavBar
{
  display:              flex;
  flex-flow:            row wrap;
  justify-content:      flex-start;
  position:             fixed;
  top:                  0;
  width:                100%;
  min-height:           $NavbarHeight;
  line-height:          $NavbarHeight;
  margin-left:          -10px;
  margin-right:         0px;
  padding-left:         15px;
  padding-right:        15px; 
  font-family:          $ControlFont;
  font-style:           normal;
  font-weight:          normal;
  font-size:            $NavbarFontSize;
  color:                $NavbarTextColor;
  background:           $NavbarBackground;
  text-align:           left;
  border-bottom:        1px solid $NavbarBorderColor;

  > div  
  {
    height:             $NavbarHeight;
    line-height:        $NavbarHeight;
    padding-left:       16px;
    padding-right:      5px;
    margin-left:        16px;
    border-left:        1px solid $NavbarLineColor;
  
    &:nth-child(1)    
    {
      border-left:      none;
      padding-left:     0px;
      margin-left:      0px;
    }
  }

  span[Label]  
  {
    color:              $NavbarLabelColor;
    font-style:         italic;

    &::after    
    {
      content:          "\00a0\00a0"
    }
  }
    
  a, a:visited  
  {
    color:              $NavbarLinkColor;
    text-decoration:    none;
  }

  a:hover  
  {
    text-decoration:    underline;
  }

  button  
  {
    border:            1px solid $NavbarLineColor;
    border-radius:     0px;
    font-size:         80%; 
    height:            26px;
  
    &:disabled, &:hover:disabled    
    {
      color:           #757575;
    }
  }

  select  
  {
    background:        inherit;
    color:             $NavbarTextColor;
    border:            1px solid $NavbarLineColor;
    font-size:         85%;
  }

  select:hover  
  {
    background:        scale_color($NavbarBackground, $lightness : 25%);
  }    
}  



//   -----  Manual pages  -----


body[Type="man"]
{
  #Main
  {
    margin-left:         64px;
    margin-top:          80px;
  }

  .PageTitle
  {
    display:          inline-block;
    height:           50px;
    line-height:      50px;
    font-family:      $TitleFont;
    font-style:       italic;
    font-weight:      normal;
    font-size:        25px;
    color:            $TitleBarTextColor1;
    background:       $TitleBarBackground;
    padding-left:     30px;
    padding-right:    30px;
    margin-left:      0px;
    margin-bottom:    60px;    
  }

  #Prologue
  {
    margin-bottom:       35px;
  }  
  
  div.Collapsible
  {
    overflow:            hidden;
    margin-bottom:       35px;
  
    &[State="HIDDEN"]
    {
      margin-bottom:     0px;
    }
  }

  pre a[RefType="manpage"]
  {
    color:             inherit; 
    background:        $SecondaryBackground;
    text-decoration:   none; 
  
    &:hover
    {
      color:             $MainLinkColor;
      text-decoration:   1px underline solid;
    }
  }

  .HeaderBar
  {
    display:          inline-block;
    font-family:      $TitleFont;
    font-size:        18px;
    font-style:       italic;
    font-weight:      normal;
    color:            $TitleBarTextColor1;
    background:       $TitleBarBackground;
    width:            680px;
    height:           30px;
    line-height:      30px;
    padding-left:     18px;
    text-align:       left;
    margin-top:       0px;
  
    &[State="HIDDEN"]    
    {
      border-bottom:    1px solid $MainBackground;
    }     
  }  
}



//   -----  Info pages  -----


body[Type="info"]
{
  #Main
  {
    margin-left:           64px;
    margin-top:            80px;
  }

  pre a[RefType="info"]  
  {
    color:                 $InfoLinkColor;
    text-decoration:       none;

    &:hover
    {
      text-decoration:     1px underline solid;
    }
  }

  .InfoTitle   
  {
    display:               inline-block;
    max-width:             500px;
    font-family:           $TitleFont;
    font-style:            italic;
    font-weight:           normal;
    font-size:             18px;
    color:                 $TitleBarTextColor1;
    background:            $TitleBarBackground;
    padding-left:          30px;
    padding-right:         30px;
    padding-top:           5px;
    padding-bottom:        5px;
    margin-bottom:         40px;    

    &[ULType="star"], &[ULType="equals"]  
    {  
      font-size:           25px;  
      padding-top:         5px;
      padding-bottom:      5px;

      > span[Number] 
      {
        font-size:         125%;

        &::after
        {
          content:         "\2002";
        }
      }
    }
   
    > span[Number]    
    {
      color:               $TitleBarTextColor2;
      font-family:         $TitleNumberFont;      
     
      &::after
      {
        content:           "\2002\2502\2002\2002";
        color:             scale-color($TitleBarBackground, $lightness : 25%);
      }
    }
  }

  .InfoFootnotes  
  {
    padding-top:           10px;
    border-top:            1px dotted $AccentColor2;

    > pre
    {
      font-size:           80%;
    }
  }
}



//   -----  Apropos pages  -----


body[Type="apropos"]
{
  font-family:     $ProportionalFont;
  font-size:       15px;

  #Main
  {
    margin-left:         80px;
    margin-top:          80px;
    width:               75%;
  }

  #ByNameButton, #BySectionButton  
  {
    width:             7em;  
  }

  .AproposSectionBar  
  {
    display:          block;
    font-family:      $TitleFont;
    font-style:       italic;
    font-weight:      normal;
    font-size:        17px;
    color:            $TitleBarTextColor1;
    background:       $TitleBarBackground;
    line-height:      30px;
    height:           30px;
    padding-left:     10px;
    padding-right:    0px;
    padding-top:      0px;
    padding-bottom:   0px;
    margin-left:      1px;
    margin-right:     1px;
    margin-top:       0px;
    margin-bottom:    0px;
    text-align:       left;
    border-style:     none; 

    &[State="HIDDEN"]    
    {
      border-bottom:    1px solid $MainBackground;
    }  
  }

  .AproposContainer
  {
    width:           100%;
    margin-top:      0px;
    margin-bottom:   45px;
    margin-left:     0px;
    margin-right:    0px;
    padding-left:    0px;
    padding-right:   0px;
    padding-top:     0px;
    padding-bottom:  0px;
    border-style:    none;  
    overflow:        hidden;
  
    &[State="HIDDEN"]    
    {
      margin-bottom:   0px;
    }  
  }


  .AproposTable  
  { 
    font-family:     $ProportionalFont;
    font-size:       15px;
    border-collapse: separate;
    border-bottom:   2px solid $AccentColor1;
    width:           100%;
    margin-left:     0px;
    margin-top:      0px;
    padding-left:    0px;
    padding-right:   0px;
    padding-top:     0px;
    padding-bottom:  0px;
  }


  .AproposTableHeader  
  {
    font-family:      inherit;
    font-style:       italic;
    font-weight:      bold;
    font-size:        15px;
    color:            $MainBackground;
    background:       $MainTextColor;
    text-align:       left;    
    margin-left:      0px;

    > th    
    {
      padding-top:      6px;
      padding-bottom:   6px;
      padding-left:     10px;
  
      &[Column="page"]      
      {
        width:  2in;
      }

      &[Column="description"]      
      {
        width:  5in;
      }
    }
  }


  .AproposTableRow  
  {
  	color:                   $MainTextColor;
    margin-left:      0px;

    &:nth-child(even)    
    {
      background:            $MainBackground;
    }

    &:nth-child(odd)    
    {
      background:            $SecondaryBackground;
    }

    > td    
    {
      font-size:             15px;
      padding-left:          8px;
      padding-right:         8px;
      padding-bottom:        4px;
      padding-top:           4px;
    
      a
      {
        color:               $MainLinkColor;
        text-decoration:     none;
  
        &:hover        
        {
          text-decoration:   1px underline solid;
        }
      }
    }      
  }
}

      

//   -----  Splash page and error-notification pages  ----- 


body[Type="splash"]
{
  font-family:           $ProportionalFont;
  font-size:             16px;
  margin-left:           75px;
  margin-top:            75px;

  > .PageTitle  
  {
    font-family:         $TitleFont;
    font-size:           48px;
    font-style:          italic;
    font-weight:         bold;
    color:               $TitleColor;
    margin-bottom:       20px;
  }

  .Splash  
  {
    width:               80%;
    max-width:           7.5in;
    padding-left:        24px;
    padding-right:       24px;
    padding-top:         18px;
    padding-bottom:      20px;
    margin-bottom:       50px;
    color:               $MainTextColor;
    background:          $SecondaryBackground;
    border-left:         5px solid $AccentColor1;
  
    > p[Heading]    
    {
      font-size:         24px;
      font-weight:       bold;
      font-style:        italic;
      margin-top:        0px;
      margin-bottom:     15px;
    }

    > .Divider    
    {
      margin-top:        18px;
      margin-bottom:     18px;
      border-bottom:     1px dotted $AccentColor1;
    }

    input    
    {
      height:            25px;
      border:            1px solid $MainTextColor;
      border-radius:     0px;
      padding-left:      8px;
      padding-right:     8px;
    }

    select
    {
      height:            30px;
      background:        $NavbarBackground;
      color:             $NavbarTextColor;
      border:            1px solid $NavbarLineColor;
    }

    .Filename    
    {
      color:             #000000;
      font-style:        italic;
    }

    .Code    
    {
      font-family:       $ControlFont;
      display:           inline-block;
      color:             #505050;
      background:        #eeeeee;
      margin-top:        4px;
      margin-bottom:     4px;
      padding:           8px;
      border:            1px dashed #505050;
    }

    .Code > span[Var]    
    {
      color:             #00a0a0;
      font-style:        italic;
    }

    a, a:visited    
    {
      color:             $MainLinkColor;
      text-decoration:   none;
    }

    a:hover    
    {
      text-decoration:   1px underline solid;
    }
  }  
}
